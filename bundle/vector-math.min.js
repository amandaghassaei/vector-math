!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).VECTOR_MATH={})}(this,(function(t){"use strict";const s=1e-15;class i{constructor(t,s){this.x=t||0,this.y=s||0}set(t,s){return this.x=t,this.y=s,this}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divideScalar(t){return 0===t&&console.warn("Dividing by zero in Vector2.divideScalar()."),this.multiplyScalar(1/t)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}lengthSq(){return this.dot(this)}length(){return Math.sqrt(this.lengthSq())}normalize(){let t=this.length();return 0===t&&(console.warn("Attempting to normalize zero length Vector2."),t=1),this.divideScalar(t),this}applyMatrix3(t){if(t.isIdentity)return this;const s=this.x,i=this.y,h=t.elements;return this.x=h[0]*s+h[1]*i+h[2],this.y=h[3]*s+h[4]*i+h[5],this}copy(t){return this.x=t.x,this.y=t.y,this}equals(t){return this.x===t.x&&this.y===t.y}isZero(){return 0===this.x&&0===this.y}clone(){return new i(this.x,this.y)}toArray(){return[this.x,this.y]}}class h{constructor(t,s,i,e,r,n,a){void 0!==t?(this._elements=[t,s,i,e,r,n],this._isIdentity=void 0===a?h._checkElementForIdentity(this._elements):a):(this._elements=[1,0,0,0,1,0],this._isIdentity=!0)}set elements(t){throw new Error("No elements setter on Matrix3.")}get elements(){return this._elements}set isIdentity(t){throw new Error("No isIdentity setter on Matrix3.")}get isIdentity(){return this._isIdentity}_set(t,s,i,h,e,r){const{_elements:n}=this;return n[0]=t,n[1]=s,n[2]=i,n[3]=h,n[4]=e,n[5]=r,this}setIdentity(){return this._set(1,0,0,0,1,0),this._isIdentity=!0,this}static _checkElementForIdentity(t){const[i,h,e,r,n,a]=t;return Math.abs(i-1)<=s&&Math.abs(n-1)<=s&&Math.abs(h)<=s&&Math.abs(e)<=s&&Math.abs(r)<=s&&Math.abs(a)<=s}setFromRotationTranslation(t,s){if(0===t&&0===s.x&&0===s.y)return this.setIdentity();const i=Math.cos(t),h=-Math.sin(t),e=-h,r=i,n=s.x*i+s.y*h,a=s.x*e+s.y*r;return this._set(i,h,n,e,r,a),this._isIdentity=!1,this}equals(t){const s=this.elements,i=t.elements;for(let t=0,h=s.length;t<h;t++)if(s[t]!==i[t])return!1;return!0}copy(t){const{elements:s}=t;return this._set(s[0],s[1],s[2],s[3],s[4],s[5]),this._isIdentity=t.isIdentity,this}clone(){const{_elements:t}=this;return new h(t[0],t[1],t[2],t[3],t[4],t[5],this._isIdentity)}}
/**
     * @license
     * Copyright 2010-2023 Three.js Authors
     * SPDX-License-Identifier: MIT
     */function e(t,s,i){return Math.max(s,Math.min(i,t))}let r=class{constructor(t=0,s=0,i=0,h=1){this.isQuaternion=!0,this._x=t,this._y=s,this._z=i,this._w=h}static slerpFlat(t,s,i,h,e,r,n){let a=i[h+0],o=i[h+1],y=i[h+2],l=i[h+3];const _=e[r+0],u=e[r+1],x=e[r+2],c=e[r+3];if(0===n)return t[s+0]=a,t[s+1]=o,t[s+2]=y,void(t[s+3]=l);if(1===n)return t[s+0]=_,t[s+1]=u,t[s+2]=x,void(t[s+3]=c);if(l!==c||a!==_||o!==u||y!==x){let t=1-n;const s=a*_+o*u+y*x+l*c,i=s>=0?1:-1,h=1-s*s;if(h>Number.EPSILON){const e=Math.sqrt(h),r=Math.atan2(e,s*i);t=Math.sin(t*r)/e,n=Math.sin(n*r)/e}const e=n*i;if(a=a*t+_*e,o=o*t+u*e,y=y*t+x*e,l=l*t+c*e,t===1-n){const t=1/Math.sqrt(a*a+o*o+y*y+l*l);a*=t,o*=t,y*=t,l*=t}}t[s]=a,t[s+1]=o,t[s+2]=y,t[s+3]=l}static multiplyQuaternionsFlat(t,s,i,h,e,r){const n=i[h],a=i[h+1],o=i[h+2],y=i[h+3],l=e[r],_=e[r+1],u=e[r+2],x=e[r+3];return t[s]=n*x+y*l+a*u-o*_,t[s+1]=a*x+y*_+o*l-n*u,t[s+2]=o*x+y*u+n*_-a*l,t[s+3]=y*x-n*l-a*_-o*u,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,s,i,h){return this._x=t,this._y=s,this._z=i,this._w=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,s){const i=t._x,h=t._y,e=t._z,r=t._order,n=Math.cos,a=Math.sin,o=n(i/2),y=n(h/2),l=n(e/2),_=a(i/2),u=a(h/2),x=a(e/2);switch(r){case"XYZ":this._x=_*y*l+o*u*x,this._y=o*u*l-_*y*x,this._z=o*y*x+_*u*l,this._w=o*y*l-_*u*x;break;case"YXZ":this._x=_*y*l+o*u*x,this._y=o*u*l-_*y*x,this._z=o*y*x-_*u*l,this._w=o*y*l+_*u*x;break;case"ZXY":this._x=_*y*l-o*u*x,this._y=o*u*l+_*y*x,this._z=o*y*x+_*u*l,this._w=o*y*l-_*u*x;break;case"ZYX":this._x=_*y*l-o*u*x,this._y=o*u*l+_*y*x,this._z=o*y*x-_*u*l,this._w=o*y*l+_*u*x;break;case"YZX":this._x=_*y*l+o*u*x,this._y=o*u*l+_*y*x,this._z=o*y*x-_*u*l,this._w=o*y*l-_*u*x;break;case"XZY":this._x=_*y*l-o*u*x,this._y=o*u*l-_*y*x,this._z=o*y*x+_*u*l,this._w=o*y*l+_*u*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!1!==s&&this._onChangeCallback(),this}setFromAxisAngle(t,s){const i=s/2,h=Math.sin(i);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const s=t.elements,i=s[0],h=s[4],e=s[8],r=s[1],n=s[5],a=s[9],o=s[2],y=s[6],l=s[10],_=i+n+l;if(_>0){const t=.5/Math.sqrt(_+1);this._w=.25/t,this._x=(y-a)*t,this._y=(e-o)*t,this._z=(r-h)*t}else if(i>n&&i>l){const t=2*Math.sqrt(1+i-n-l);this._w=(y-a)/t,this._x=.25*t,this._y=(h+r)/t,this._z=(e+o)/t}else if(n>l){const t=2*Math.sqrt(1+n-i-l);this._w=(e-o)/t,this._x=(h+r)/t,this._y=.25*t,this._z=(a+y)/t}else{const t=2*Math.sqrt(1+l-i-n);this._w=(r-h)/t,this._x=(e+o)/t,this._y=(a+y)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,s){let i=t.dot(s)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*s.z-t.z*s.y,this._y=t.z*s.x-t.x*s.z,this._z=t.x*s.y-t.y*s.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(e(this.dot(t),-1,1)))}rotateTowards(t,s){const i=this.angleTo(t);if(0===i)return this;const h=Math.min(1,s/i);return this.slerp(t,h),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,s){const i=t._x,h=t._y,e=t._z,r=t._w,n=s._x,a=s._y,o=s._z,y=s._w;return this._x=i*y+r*n+h*o-e*a,this._y=h*y+r*a+e*n-i*o,this._z=e*y+r*o+i*a-h*n,this._w=r*y-i*n-h*a-e*o,this._onChangeCallback(),this}slerp(t,s){if(0===s)return this;if(1===s)return this.copy(t);const i=this._x,h=this._y,e=this._z,r=this._w;let n=r*t._w+i*t._x+h*t._y+e*t._z;if(n<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,n=-n):this.copy(t),n>=1)return this._w=r,this._x=i,this._y=h,this._z=e,this;const a=1-n*n;if(a<=Number.EPSILON){const t=1-s;return this._w=t*r+s*this._w,this._x=t*i+s*this._x,this._y=t*h+s*this._y,this._z=t*e+s*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(a),y=Math.atan2(o,n),l=Math.sin((1-s)*y)/o,_=Math.sin(s*y)/o;return this._w=r*l+this._w*_,this._x=i*l+this._x*_,this._y=h*l+this._y*_,this._z=e*l+this._z*_,this._onChangeCallback(),this}slerpQuaternions(t,s,i){return this.copy(t).slerp(s,i)}random(){const t=Math.random(),s=Math.sqrt(1-t),i=Math.sqrt(t),h=2*Math.PI*Math.random(),e=2*Math.PI*Math.random();return this.set(s*Math.cos(h),i*Math.sin(e),i*Math.cos(e),s*Math.sin(h))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,s=0){return this._x=t[s],this._y=t[s+1],this._z=t[s+2],this._w=t[s+3],this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._w,t}fromBufferAttribute(t,s){return this._x=t.getX(s),this._y=t.getY(s),this._z=t.getZ(s),this._w=t.getW(s),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};class n{constructor(t=0,s=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=s,this.z=i}set(t,s,i){return void 0===i&&(i=this.z),this.x=t,this.y=s,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this.z=t.z+s.z,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,s){return this.x=t.x*s.x,this.y=t.y*s.y,this.z=t.z*s.z,this}applyEuler(t){return this.applyQuaternion(o.setFromEuler(t))}applyAxisAngle(t,s){return this.applyQuaternion(o.setFromAxisAngle(t,s))}applyMatrix3(t){const s=this.x,i=this.y,h=this.z,e=t.elements;return this.x=e[0]*s+e[3]*i+e[6]*h,this.y=e[1]*s+e[4]*i+e[7]*h,this.z=e[2]*s+e[5]*i+e[8]*h,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const s=this.x,i=this.y,h=this.z,e=t.elements,r=1/(e[3]*s+e[7]*i+e[11]*h+e[15]);return this.x=(e[0]*s+e[4]*i+e[8]*h+e[12])*r,this.y=(e[1]*s+e[5]*i+e[9]*h+e[13])*r,this.z=(e[2]*s+e[6]*i+e[10]*h+e[14])*r,this}applyQuaternion(t){const s=this.x,i=this.y,h=this.z,e=t.x,r=t.y,n=t.z,a=t.w,o=a*s+r*h-n*i,y=a*i+n*s-e*h,l=a*h+e*i-r*s,_=-e*s-r*i-n*h;return this.x=o*a+_*-e+y*-n-l*-r,this.y=y*a+_*-r+l*-e-o*-n,this.z=l*a+_*-n+o*-r-y*-e,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const s=this.x,i=this.y,h=this.z,e=t.elements;return this.x=e[0]*s+e[4]*i+e[8]*h,this.y=e[1]*s+e[5]*i+e[9]*h,this.z=e[2]*s+e[6]*i+e[10]*h,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this.z=Math.max(t.z,Math.min(s.z,this.z)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this.z=Math.max(t,Math.min(s,this.z)),this}clampLength(t,s){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(s,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this.z+=(t.z-this.z)*s,this}lerpVectors(t,s,i){return this.x=t.x+(s.x-t.x)*i,this.y=t.y+(s.y-t.y)*i,this.z=t.z+(s.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,s){const i=t.x,h=t.y,e=t.z,r=s.x,n=s.y,a=s.z;return this.x=h*a-e*n,this.y=e*r-i*a,this.z=i*n-h*r,this}projectOnVector(t){const s=t.lengthSq();if(0===s)return this.set(0,0,0);const i=t.dot(this)/s;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return a.copy(this).projectOnVector(t),this.sub(a)}reflect(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const s=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===s)return Math.PI/2;const i=this.dot(t)/s;return Math.acos(e(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const s=this.x-t.x,i=this.y-t.y,h=this.z-t.z;return s*s+i*i+h*h}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,s,i){const h=Math.sin(s)*t;return this.x=h*Math.sin(i),this.y=Math.cos(s)*t,this.z=h*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,s,i){return this.x=t*Math.sin(s),this.y=i,this.z=t*Math.cos(s),this}setFromMatrixPosition(t){const s=t.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(t){const s=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),h=this.setFromMatrixColumn(t,2).length();return this.x=s,this.y=i,this.z=h,this}setFromMatrixColumn(t,s){return this.fromArray(t.elements,4*s)}setFromMatrix3Column(t,s){return this.fromArray(t.elements,3*s)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this.z=t[s+2],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t[s+2]=this.z,t}fromBufferAttribute(t,s){return this.x=t.getX(s),this.y=t.getY(s),this.z=t.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),s=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(s),this.y=i*Math.sin(s),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const a=new n,o=new r;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"153"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="153");const y=new n;class l{constructor(t,s,i,h,e,r,n,a,o,y,_,u,x){void 0!==t?(this._elements=[t,s,i,h,e,r,n,a,o,y,_,u],this._isIdentity=void 0===x?l._checkElementsForIdentity(this._elements):x):(this._elements=[1,0,0,0,0,1,0,0,0,0,1,0],this._isIdentity=!0)}set elements(t){throw new Error("No elements setter on Matrix4.")}get elements(){return this._elements}set isIdentity(t){throw new Error("No isIdentity setter on Matrix4.")}get isIdentity(){return this._isIdentity}static _checkElementsForIdentity(t){const[i,h,e,r,n,a,o,y,l,_,u,x]=t;return Math.abs(i-1)<=s&&Math.abs(a-1)<=s&&Math.abs(u-1)<=s&&Math.abs(h)<=s&&Math.abs(e)<=s&&Math.abs(r)<=s&&Math.abs(n)<=s&&Math.abs(o)<=s&&Math.abs(y)<=s&&Math.abs(l)<=s&&Math.abs(_)<=s&&Math.abs(x)<=s}_set(t,s,i,h,e,r,n,a,o,y,l,_){const{_elements:u}=this;return u[0]=t,u[1]=s,u[2]=i,u[3]=h,u[4]=e,u[5]=r,u[6]=n,u[7]=a,u[8]=o,u[9]=y,u[10]=l,u[11]=_,this}setIdentity(){return this._set(1,0,0,0,0,1,0,0,0,0,1,0),this._isIdentity=!0,this}premultiplyMatrix4(t){return l._multiplyMatrices(this,t,this)}multiplyMatrix4(t){return l._multiplyMatrices(this,this,t)}static _multiplyMatrices(t,s,i){if(s.isIdentity)return t.copy(i);if(i.isIdentity)return t.copy(s);const{_elements:h}=t,e=s.elements,r=i.elements,n=e[0],a=e[1],o=e[2],y=e[3],_=e[4],u=e[5],x=e[6],c=e[7],z=e[8],m=e[9],d=e[10],M=e[11],p=r[0],w=r[1],g=r[2],f=r[3],b=r[4],I=r[5],C=r[6],S=r[7],E=r[8],q=r[9],A=r[10],F=r[11];return h[0]=n*p+a*b+o*E,h[1]=n*w+a*I+o*q,h[2]=n*g+a*C+o*A,h[3]=n*f+a*S+o*F+y,h[4]=_*p+u*b+x*E,h[5]=_*w+u*I+x*q,h[6]=_*g+u*C+x*A,h[7]=_*f+u*S+x*F+c,h[8]=z*p+m*b+d*E,h[9]=z*w+m*I+d*q,h[10]=z*g+m*C+d*A,h[11]=z*f+m*S+d*F+M,t._isIdentity=l._checkElementsForIdentity(h),t}setTranslation(t){return 0===t.x&&0===t.y&&0===t.z?this.setIdentity():(this._set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z),this._isIdentity=!1,this)}setRotationAxisAngleAtOffset(t,s,i){if(0===s)return this.setIdentity();const h=Math.cos(s),e=Math.sin(s);return this._setRotationAxisCosSin(h,e,t,i)}setRotationFromVectorToVector(t,s,i){if(t.equals(s))return this.setIdentity();const h=y.crossVectors(t,s),e=h.length();h.divideScalar(e);const r=t.dot(s);return this._setRotationAxisCosSin(r,e,h,i)}setReflectionNormalAtOffset(t,s){const i=t.x,h=t.y,e=t.z,r=1-2*i*i,n=-2*i*h,a=-2*i*e,o=n,y=1-2*h*h,l=-2*h*e,_=a,u=l,x=1-2*e*e;return s?this._setRotationMatrixAtOffset(r,n,a,o,y,l,_,u,x,s):this._set(r,n,a,0,o,y,l,0,_,u,x,0),this._isIdentity=!1,this}_setRotationAxisCosSin(t,s,i,h){const e=1-t,r=i.x,n=i.y,a=i.z,o=e*r,y=e*n,l=o*r+t,_=o*n-s*a,u=o*a+s*n,x=o*n+s*a,c=y*n+t,z=y*a-s*r,m=o*a-s*n,d=y*a+s*r,M=e*a*a+t;return h?this._setRotationMatrixAtOffset(l,_,u,x,c,z,m,d,M,h):this._set(l,_,u,0,x,c,z,0,m,d,M,0),this._isIdentity=!1,this}_setRotationMatrixAtOffset(t,s,i,h,e,r,n,a,o,y){const l=-y.x*(t-1)-y.y*s-y.z*i,_=-y.x*h-y.y*(e-1)-y.z*r,u=-y.x*n-y.y*a-y.z*(o-1);this._set(t,s,i,l,h,e,r,_,n,a,o,u)}invertTransform(){if(this._isIdentity)return this;const{_elements:t}=this,s=t[0],i=t[4],h=t[8],e=t[1],r=t[5],n=t[9],a=t[2],o=t[6],y=t[10],l=t[3],_=t[7],u=t[11],x=-s*l-i*_-h*u,c=-e*l-r*_-n*u,z=-a*l-o*_-y*u;return this._set(s,i,h,x,e,r,n,c,a,o,y,z),this}equals(t){const s=this.elements,i=t.elements;for(let t=0,h=s.length;t<h;t++)if(s[t]!==i[t])return!1;return!0}copy(t){const{elements:s}=t;return this._set(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11]),this._isIdentity=t.isIdentity,this}clone(){const{_elements:t}=this;return new l(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],this._isIdentity)}}class _{constructor(t,s,i,h){this._x=t||0,this._y=s||0,this._z=i||0,this._w=void 0!==h?h:1}set x(t){throw new Error("No x setter on Quaternion.")}get x(){return this._x}set y(t){throw new Error("No y setter on Quaternion.")}get y(){return this._y}set z(t){throw new Error("No z setter on Quaternion.")}get z(){return this._z}set w(t){throw new Error("No w setter on Quaternion.")}get w(){return this._w}setFromUnitVectors(t,s){let i=t.x*s.x+t.y*s.y+t.z*s.z+1;return i<=Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*s.z-t.z*s.y,this._y=t.z*s.x-t.x*s.z,this._z=t.x*s.y-t.y*s.x,this._w=i),this.normalize()}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this.lengthSq())}normalize(){let t=this.length();return 0===t?(console.warn("Attempting to normalize zero length Quaternion."),this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this}multiply(t){return _._multiplyQuaternions(this,this,t)}premultiply(t){return _._multiplyQuaternions(this,t,this)}static _multiplyQuaternions(t,s,i){const h=s.x,e=s.y,r=s.z,n=s.w,a=i.x,o=i.y,y=i.z,l=i.w;return t._x=h*l+n*a+e*y-r*o,t._y=e*l+n*o+r*a-h*y,t._z=r*l+n*y+h*o-e*a,t._w=n*l-h*a-e*o-r*y,t}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this}clone(){return new _(this._x,this._y,this._z,this._w)}}t.Matrix3=h,t.Matrix4=l,t.NUMERICAL_TOLERANCE=s,t.Quaternion=_,t.Vector2=i,t.Vector3=class t{constructor(t,s,i){this.x=t||0,this.y=s||0,this.z=i||0}set(t,s,i){return this.x=t,this.y=s,this.z=i,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}divideScalar(t){return 0===t&&console.warn("Dividing by zero in Vector3.divideScalar()."),this.multiplyScalar(1/t)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){const s=this.x,i=this.y,h=this.z,e=t.x,r=t.y,n=t.z;return this.x=i*n-h*r,this.y=h*e-s*n,this.z=s*r-i*e,this}lengthSq(){return this.dot(this)}length(){return Math.sqrt(this.lengthSq())}normalize(){let t=this.length();return 0===t&&(console.warn("Attempting to normalize zero length Vector3."),t=1),this.divideScalar(t),this}applyMatrix4(t){if(t.isIdentity)return this;const s=this.x,i=this.y,h=this.z,e=t.elements;return this.x=e[0]*s+e[1]*i+e[2]*h+e[3],this.y=e[4]*s+e[5]*i+e[6]*h+e[7],this.z=e[8]*s+e[9]*i+e[10]*h+e[11],this}applyMatrix4RotationComponent(t){if(t.isIdentity)return this;const s=this.x,i=this.y,h=this.z,e=t.elements;return this.x=e[0]*s+e[1]*i+e[2]*h,this.y=e[4]*s+e[5]*i+e[6]*h,this.z=e[8]*s+e[9]*i+e[10]*h,this}applyQuaternion(t){const s=this.x,i=this.y,h=this.z,e=t.x,r=t.y,n=t.z,a=t.w,o=a*s+r*h-n*i,y=a*i+n*s-e*h,l=a*h+e*i-r*s,_=-e*s-r*i-n*h;return this.x=o*a+_*-e+y*-n-l*-r,this.y=y*a+_*-r+l*-e-o*-n,this.z=l*a+_*-n+o*-r-y*-e,this}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}clone(){return new t(this.x,this.y,this.z)}toArray(){return[this.x,this.y,this.z]}},t.clampValue=function(t,s,i){return Math.max(Math.min(t,i),s)},t.degreesToRadians=function(t){return t/180*Math.PI},t.radiansToDegrees=function(t){return 180*t/Math.PI},t.roundValueToIncrement=function(t,s){var i;if(0===s)return t;if(s<0)throw new Error(`Invalid coarse step: ${s}.`);const h=Math.round(t/s)*s,e=(null===(i=s.toString().split(".")[1])||void 0===i?void 0:i.length)||0;return parseFloat(h.toFixed(e))}}));
//# sourceMappingURL=vector-math.min.js.map
